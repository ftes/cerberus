export CERBERUS_BROWSER_TOOLS_DIR="${PWD}/tmp/browser-tools"
export CERBERUS_CHROME_VERSION="${CERBERUS_CHROME_VERSION:-145.0.7632.117}"

case "$(uname -s):$(uname -m)" in
  Darwin:arm64)
    export CERBERUS_CFT_PLATFORM="mac-arm64"
    export CERBERUS_CHROME_RELATIVE="chrome-mac-arm64/Google Chrome for Testing.app/Contents/MacOS/Google Chrome for Testing"
    ;;
  Darwin:x86_64)
    export CERBERUS_CFT_PLATFORM="mac-x64"
    export CERBERUS_CHROME_RELATIVE="chrome-mac-x64/Google Chrome for Testing.app/Contents/MacOS/Google Chrome for Testing"
    ;;
  Linux:x86_64|Linux:amd64)
    export CERBERUS_CFT_PLATFORM="linux64"
    export CERBERUS_CHROME_RELATIVE="chrome-linux64/chrome"
    ;;
  *)
    echo "Unsupported platform for Cerberus browser runtime: $(uname -s):$(uname -m)" >&2
    ;;
esac

export CHROME="${CERBERUS_BROWSER_TOOLS_DIR}/chrome-${CERBERUS_CHROME_VERSION}-${CERBERUS_CFT_PLATFORM}/${CERBERUS_CHROME_RELATIVE}"
export CHROMEDRIVER="${CERBERUS_BROWSER_TOOLS_DIR}/chromedriver-${CERBERUS_CHROME_VERSION}-${CERBERUS_CFT_PLATFORM}/chromedriver-${CERBERUS_CFT_PLATFORM}/chromedriver"

if [ -f "${CERBERUS_BROWSER_TOOLS_DIR}/env.sh" ]; then
  source "${CERBERUS_BROWSER_TOOLS_DIR}/env.sh"
fi
